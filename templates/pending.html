{% extends "index.html" %}
{% block body %}

<table class="table">
    <tr>
        <td class="td header", colspan="2">ID</td>
        {% for h in headers %}
            <td class="td header", colspan="10">{{h}}</td>
        {% endfor %}
    </tr>
    {% for i, row in enumerate(data) %}
        {% if in_page(i) %}
        <tr>
            <td class="data" colspan="2"> {{i + 1}} </td>
            <td class="data" colspan="10"> {{row[0]}} </td>
            <td class="data" colspan="10"> {{row[1]}} </td>
            <td class="data" colspan="10"> {{row[3]}} </td>
            <td class="data" colspan="10"> {{row[4]}} </td>
            <td class="data" colspan="10"> {{row[5]}} </td>
            <td class="data" colspan="10"> {{row[6]}} </td>
            <td class="data" colspan="10"> {{row[7]}} </td>
            <td class="data" colspan="10"> {{row[8]}} </td>
            <td class="data" colspan="10"> {{row[9]}} </td>
            <form action="{{ url_for('authorize', username=row[0], dni=row[4], author=session['user']) }}" method="GET">
                <td> <input type="submit" value="Autorizar"></td>
            </form>
            <form action="{{ url_for('render_pdf', name=row[1], dni=row[4], phone=row[5], e_mail=row[6])}}" method="GET">
                <td> <input type="submit" value="Obtener Planilla"></td>
            </form>
        </tr>
        {% endif %}
    {% endfor %}
</table>

{% if len(data) > 0 %}
<h3>{{ word('results', session['lang']) }}: {{ word('page', session['lang']) }} {{current}}/{{total}} ({{len(data)}} total)</h3>
    <h4>
        {% if current != 1 %}
            <a href="{{ url_for('pending', page=1) }}">{{ word('first', session['lang']) }} </a>
            ...
        {% endif %}    
        {% if current > 1 %}
            <a href="{{ url_for('pending', page=current - 1) }}">{{ word('prev', session['lang']) }} </a>
            .
        {% endif %}
        {% if current < total %}
            <a href="{{ url_for('pending', page=current + 1) }}">{{ word('next', session['lang']) }} </a>
        {% endif %}
        {% if current != total %}
            ...
            <a href="{{ url_for('pending', page=total) }}">{{ word('last', session['lang']) }} </a>            
        {% endif %}
    </h4>
{% endif %}

{% if len(data) == 0 %}
<h3>{{ word('no_results', session['lang']) }}</h3>
{% endif %}

{% endblock %}